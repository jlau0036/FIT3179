{  
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json", 
    "title": "World Happiness 2023",  
    "width": 800,  
    "height": 400, 
    "projection": {"type": "equalEarth"}, 
    "data": {    
        "url": "https://raw.githubusercontent.com/jlau0036/FIT3179/main/FIT3179_Homework_Week9/ne_110m.json",    
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}  },

        "layer": [         
            {
            "transform": [
              {
                "calculate": "'Data is not available in ' + datum.properties.NAME",
                "as": "note"
              }
            ],
            "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "black"},
            "encoding": {"tooltip": {"field": "note"}}
          }, 
           

     {"data": {    
        "url": "https://raw.githubusercontent.com/jlau0036/FIT3179/main/FIT3179_Homework_Week9/ne_110m.json",    
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}  }, 
        
        "transform": [    
            {      "lookup": "properties.NAME",      
                    "from": {        
                        "data": {          
                            "url": "https://raw.githubusercontent.com/jlau0036/FIT3179/main/FIT3179_Homework_Week9/WHR2023.csv"        },        
                            "key": "Countryname",
                            "fields": ["Ladderscore"]      
                        }    
                    }, 
                    { "calculate": "datum.Ladderscore", "as": "Ladder score" }
                ],  
                "mark": {"type": "geoshape",
                         "stroke": "#000000",
                         "strokeWidth": 1},  
                "encoding": {    
                    "color": {   
                        "field": "Ladder score",      
                        "type": "quantitative",      
                        "scale": {        
                            "type": "threshold",        
                            "domain": [2, 3, 4, 5, 6, 7],        
                            "range": ["#CCE5FF", "#66B2FF", "#3399FF", "#0080FF", "#004C99", "#003366", "001933"]      
                        } 
                    },    
                    "tooltip": [      
                        {"field": "properties.NAME", "type": "nominal", "title": "Country"},      
                        {"field": "Ladder score", "type": "quantitative"}    
                    ]  
                }
            }
            ]
            }
